# Kata Agents Product Feature Brainstorm

Synthesized from three explorer/challenger pairs. Each proposal was generated by an explorer agent, then pressure-tested through 2-3 rounds of adversarial debate with a challenger agent grounded in codebase architecture analysis.

## Quick Wins (1.5-2 days total)

Four proposals survived debate. All require zero backend changes, zero new IPC handlers, and zero persistence schema changes.

| #   | Feature                            | Effort | Description                                                                                                                                                                   |
| --- | ---------------------------------- | ------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | **Copy Conversation as Markdown**  | 4-6h   | Export full conversation to clipboard. `formatTurnAsMarkdown` already exists in turn-utils.ts. Add a button in ChatDisplay header.                                            |
| 2   | **Session Cost Dashboard**         | 4-8h   | Display token usage and estimated USD cost in SessionMetadataPanel. `tokenUsage` (including costUsd) already persisted in JSONL headers. Add context window utilization bar.  |
| 3   | **Flagged Sessions Pinned to Top** | 2-4h   | Display flagged sessions in a dedicated group above date-grouped items. Reuses existing `isFlagged` infrastructure. Challenger killed a competing "Pin" concept as redundant. |
| 4   | **Quick Model Switch Shortcut**    | 30min  | `Cmd+Shift+M` opens the existing model dropdown in FreeFormInput. Challenger scoped this down from a full command palette overlay.                                            |

**Deferred from quick-wins:** Session Templates (3-5 days, moved to high-value), Cross-Workspace Search (2-3 days, unresolved product questions), Inline Token Counter (inaccurate heuristics, crowded input bar).

[Full report](quickwins-report.md)

---

## High-Value Features (9-11 weeks total)

Six proposals refined through adversarial debate, ordered by value/effort ratio.

| #   | Feature                      | Scope              | Key Insight from Debate                                                                                                                                                                                      |
| --- | ---------------------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1   | **Session Templates**        | 1-1.5 wks          | Strongest value/effort. Save session configs (prompt, sources, permissions, model) as launchable templates. Infrastructure ready: ManagedSession already stores every field.                                 |
| 2   | **Session Orchestration**    | 2.5-3 wks (phased) | Highest differentiation. Phase 1: parent spawns single child, result injection. Phase 2: multi-child parallel + session tree UI. Visual orchestration is a different product surface than CLI orchestration. |
| 3   | **Enhanced File Preview**    | 1-1.5 wks          | Tabbed file workspace in right sidebar with Shiki highlighting and diff view. Inline editing explicitly dropped after debate (scope explosion toward mini-IDE).                                              |
| 4   | **Session Search**           | 1-1.5 wks          | Full-text search across workspace sessions + structured field extraction from JSONL tool messages. "Knowledge Graph" framing dropped; structured extraction from tool data is the practical scope.           |
| 5   | **Context Health & Handoff** | 1 wk               | Context window usage bar + structured handoff document for cross-session continuity. Reframed from "compression" since SDK compaction exists. Novel value is the UI indicator + handoff.                     |
| 6   | **Session Duplication**      | 1-1.5 wks          | Full copy with fresh SDK session. Simplified from "branching" after debate showed JSONL structural sharing requires storage rewrite.                                                                         |

Items 1-5 are independent and buildable in 5-7 weeks by one developer.

[Full report](highvalue-report.md)

---

## Radical Directions (3-12 month horizon)

Seven proposals evaluated. Three survived as high-conviction bets; four were de-scoped or deferred.

**Tier 1: Build These**

| #   | Feature                                      | Scope  | Core Thesis                                                                                                                                                                                               |
| --- | -------------------------------------------- | ------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | **Reactive Workspace Agents**                | 3-5 mo | Background agents triggered by events (CI failure, PR comment, file change, cron). Transforms Kata from pull-based to push-based. HeadlessRunner + chokidar + SessionManager provide the building blocks. |
| 2   | **Session Artifacts & Knowledge Extraction** | 2-4 mo | Auto-extract structured artifacts from completed sessions (decisions, diffs, patterns). Workspace-level knowledge base with search. Builds on existing label/auto-label system.                           |
| 3   | **Workspace-as-a-Protocol**                  | 3-6 mo | Portable, versioned workspace configs. `kata install @myteam/backend-workspace` gives a fully configured agent environment. Git-based distribution first, registry later.                                 |

**Tier 2: De-scope or Defer**

- **Agent Memory Graph** -> de-scope to flat session summaries first, validate cross-session recall before investing in graph infra
- **Session Forking** -> de-scope to session duplication (already in high-value list)
- **Live Collaborative Sessions** -> defer, infrastructure cost is product-sized
- **Skill Marketplace** -> defer, grow organic skill ecosystem first

[Full report](radical-report.md)

---

## Cross-Cutting Themes

Three themes emerged independently across all pairs:

1. **Session intelligence.** Every pair identified that sessions are currently write-only. Quick-wins add cost visibility. High-value adds search and templates. Radical adds artifact extraction and knowledge accumulation. The throughline: make past sessions valuable, not disposable.

2. **Proactive over reactive.** The radical pair's strongest insight: Kata should work for you, not wait for you. The reactive agents proposal transforms the interaction model. The high-value orchestration feature is a stepping stone toward this.

3. **Reuse existing primitives.** Every surviving proposal builds on infrastructure that already exists (JSONL headers, HeadlessRunner, ConfigWatcher, label system, ManagedSession fields, Shiki components). The codebase is richer than it appears from the feature surface.

---

## Recommended Sequence

**Now (v0.8.x):** Ship all 4 quick wins in a single release. ~2 days.

**Next (v0.9.x):** Session Templates + Enhanced File Preview + Session Search. ~4 weeks. These are independent, high-value, and low-risk.

**Then (v1.0):** Context Health/Handoff + Session Orchestration Phase 1. ~2.5 weeks. These establish the foundation for the radical direction.

**Future (v1.x+):** Reactive Workspace Agents (the category-defining bet), fed by the Artifacts pipeline and distributed via Workspace-as-a-Protocol.
